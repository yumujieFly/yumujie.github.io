---
layout: post
title: Media
date: 2018-05-30 04:00:00
tags: media test
author: hanuman
---
# 多线程的锁机制
   1 、 自旋锁
       锁等待，当发现有其它的锁锁定对象的时候就就空转等待锁获取成功。   
       
   2 、偏向锁
       对一个对象加锁后会在对象头将线程id复制到对象头中，偏向于第一个访问的线程，遇到其它的线程的抢占 持有偏向锁的线程会被挂起，jvm会销毁他身上的偏向锁   

# Synchronzed与lock的区别
   | 类别 | synchronize | Lock |   
   | - | :-: | -: |
   | 存在层次 | java的关键字 在jvm 层面 | 是一个类 |
   | 锁的释放 | 1、获取锁的线程执行完同步代码，释放锁，2 线程执行异常 | 自动释放在finally中释放锁 | 
   | 锁的获取 | 假设A线程获取锁，B线程等待。如果A线程阻塞，B线程会一直等待 | 分情况而定， 线程不会一直等待 |  
   |所状态 | 无法判断 | 可以判断 |
   | 锁的类型 | 可重入，不可中断 | 可重入 可判断，可中断 |  
   | 性能 | 少量同步 | 大量同步 | 